{
  "metadata" : {
    "realm" : "/",
    "amsterVersion" : "6.5.2.2",
    "entityType" : "Scripts",
    "entityId" : "929f019e-8cfb-4270-972e-e9e967ea3d51",
    "pathParams" : { }
  },
  "data" : {
    "_id" : "929f019e-8cfb-4270-972e-e9e967ea3d51",
    "name" : "ProvisionIDM",
    "description" : "Provision an associate.",
    "script" : "bG9nZ2VyLmVycm9yKCJJRE1Qcm92aXNpb246IHN0YXJ0Iik7CgpvdXRjb21lID0gImVycm9yIjsKCnZhciBzbiwgZ2l2ZW5OYW1lLCBtYWlsOwoKLy8gSWYgInVzZXJJbmZvLmF0dHJpYnV0ZXMiIGV4aXN0cyBpbiBzaGFyZWRTdGF0ZSB0aGVuIHVzZXIgY2FtZSBmcm9tIHNvY2lhbAppZiAoKHNoYXJlZFN0YXRlLmdldCgidXNlckluZm8iKSAhPSBudWxsKSAmJiAoc2hhcmVkU3RhdGUuZ2V0KCJ1c2VySW5mbyIpLmdldCgiYXR0cmlidXRlcyIpICE9IG51bGwpKSB7Cgl2YXIgc24gPSBzaGFyZWRTdGF0ZS5nZXQoInVzZXJJbmZvIikuZ2V0KCJhdHRyaWJ1dGVzIikuZ2V0KCJzbiIpLmdldChbMF0pOwoJdmFyIGdpdmVuTmFtZSA9IHNoYXJlZFN0YXRlLmdldCgidXNlckluZm8iKS5nZXQoImF0dHJpYnV0ZXMiKS5nZXQoImdpdmVuTmFtZSIpLmdldChbMF0pOwoJdmFyIG1haWwgPSBzaGFyZWRTdGF0ZS5nZXQoInVzZXJJbmZvIikuZ2V0KCJhdHRyaWJ1dGVzIikuZ2V0KCJtYWlsIikuZ2V0KFswXSk7Cgl2YXIgdGVsZXBob25lTnVtYmVyID0gc2hhcmVkU3RhdGUuZ2V0KCJ1c2VySW5mbyIpLmdldCgiYXR0cmlidXRlcyIpLmdldCgidGVsZXBob25lTnVtYmVyIikuZ2V0KFswXSk7Cn0gZWxzZSB7Cgl2YXIgc24gPSBzaGFyZWRTdGF0ZS5nZXQoInNuIik7Cgl2YXIgZ2l2ZW5OYW1lID0gc2hhcmVkU3RhdGUuZ2V0KCJnaXZlbk5hbWUiKTsKCXZhciBtYWlsID0gc2hhcmVkU3RhdGUuZ2V0KCJtYWlsIik7Cgl2YXIgdGVsZXBob25lTnVtYmVyID0gc2hhcmVkU3RhdGUuZ2V0KCJ0ZWxlcGhvbmVOdW1iZXIiKTsKCXZhciBpbnZpdGVDb2RlID0gc2hhcmVkU3RhdGUuZ2V0KCJpbnZpdGVDb2RlIik7Cn0KbG9nZ2VyLm1lc3NhZ2UoIklETVByb3Zpc2lvbjogYXR0cmliczogc249IiArIHNuICsgIiwgZ2l2ZW5OYW1lPSIgKyBnaXZlbk5hbWUgKyAiLCBtYWlsPSIgKyBtYWlsKTsKCnZhciBwYXNzd29yZCA9ICJUcjFtYmwjMjAiOwoKaWYgKChzbiA9PSBudWxsKSB8fCAoZ2l2ZW5OYW1lID09IG51bGwpIHx8IChtYWlsID09IG51bGwpKSB7CiAgICBsb2dnZXIuZXJyb3IoIklETVByb3Zpc2lvbjogdXNlciBkZXRhaWxzIG5vdCBmb3VuZCBpbiBzaGFyZWQgc3RhdGUiKTsKICAgIG91dGNvbWUgPSAiZXJyb3IiOwp9IAplbHNlIHsKCXZhciB1c2VybmFtZSA9IG1haWw7Ci8vCXZhciBtYWlsID0gKHVzZXJuYW1lLmNvbmNhdCgiQGZyZHBjbG91ZC5jb20iKSk7Ci8vICAgIHZhciBtYWlsID0gIiI7Ci8vICAgIG1haWwgPSAodXNlcm5hbWUuY29uY2F0KCJAZnJkcGNsb3VkLmNvbSIpKS50b0xvd2VyQ2FzZSgpOwogICAgc2hhcmVkU3RhdGUucHV0KCJ1c2VybmFtZSIsIHVzZXJuYW1lKTsKICAgIGxvZ2dlci5tZXNzYWdlKCJJRE1Qcm92aXNpb246IHByb3Zpc2lvbmluZyB1c2VyOiAiICsgdXNlcm5hbWUpOwogICAgCiAgICByZXN0Qm9keSA9IAl7IAogICAgICAJCQkJInVzZXJOYW1lIjogdXNlcm5hbWUsIAogICAgICAgICAgICAJCSJtYWlsIjogbWFpbCwKICAgICAgICAgICAgCQkic24iOiBzbiwgCiAgICAgICAgICAgIAkJImdpdmVuTmFtZSI6IGdpdmVuTmFtZSwKICAgICAgICAgICAgCQkibWFpbCI6IG1haWwsCiAgICAgICAgICAgIAkJInRlbGVwaG9uZU51bWJlciI6IHRlbGVwaG9uZU51bWJlciwKICAgICAgICAgICAgCQkicGFzc3dvcmQiOiBwYXNzd29yZAogICAgCQkJfTsKCiAgICBsb2dnZXIubWVzc2FnZSgiSURNUHJvdmlzaW9uOiBwcm92aXNpb25pbmcgdXNlcjogIiArIEpTT04uc3RyaW5naWZ5KHJlc3RCb2R5KSk7CiAgCiAgICB2YXIgcmVxdWVzdCA9IG5ldyBvcmcuZm9yZ2Vyb2NrLmh0dHAucHJvdG9jb2wuUmVxdWVzdCgpOwogICAgcmVxdWVzdC5zZXRNZXRob2QoJ1BVVCcpOwogICAgcmVxdWVzdC5zZXRVcmkoJ2h0dHA6Ly9sb2NhbGhvc3Q6ODE4MC9vcGVuaWRtL21hbmFnZWQvdXNlci8nICsgdXNlcm5hbWUpOwogICAgcmVxdWVzdC5nZXRIZWFkZXJzKCkuYWRkKCJjb250ZW50LXR5cGUiLCJhcHBsaWNhdGlvbi9qc29uIik7CiAgICByZXF1ZXN0LmdldEhlYWRlcnMoKS5hZGQoIlgtT3BlbklETS1Vc2VybmFtZSIsIm9wZW5pZG0tYWRtaW4iKTsKICAgIHJlcXVlc3QuZ2V0SGVhZGVycygpLmFkZCgiWC1PcGVuSURNLVBhc3N3b3JkIixwYXNzd29yZCk7CiAgICByZXF1ZXN0LmdldEhlYWRlcnMoKS5hZGQoIklmLU5vbmUtTWF0Y2giLCIqIik7CiAgICByZXF1ZXN0LmdldEVudGl0eSgpLnNldFN0cmluZyhKU09OLnN0cmluZ2lmeShyZXN0Qm9keSkpOwogICAgdmFyIHJlc3BvbnNlID0gaHR0cENsaWVudC5zZW5kKHJlcXVlc3QpLmdldCgpOwogICAgdmFyIGpzb25SZXN1bHQgPSBKU09OLnBhcnNlKHJlc3BvbnNlLmdldEVudGl0eSgpLmdldFN0cmluZygpKTsKICAgIGxvZ2dlci5lcnJvcigiSURNUHJvdmlzaW9uOiBKU09OIHJlc3VsdDogIiArIEpTT04uc3RyaW5naWZ5KGpzb25SZXN1bHQpKTsKICAgIGlmIChqc29uUmVzdWx0Lmhhc093blByb3BlcnR5KCJfaWQiKSkgewogICAgICAgIGxvZ2dlci5lcnJvcigiSURNUHJvdmlzaW9uOiBvdXRjb21lID0gdHJ1ZSIpOwogICAgICAgIG91dGNvbWUgPSAidHJ1ZSI7CiAgICB9IGVsc2UgewogICAgICAgIGxvZ2dlci5lcnJvcigiSURNUHJvdmlzaW9uOiBvdXRjb21lID0gZXJyb3IiKTsKICAgICAgICBvdXRjb21lID0gImVycm9yIjsKICAgIH0KfQ==",
    "default" : false,
    "language" : "JAVASCRIPT",
    "context" : "AUTHENTICATION_TREE_DECISION_NODE",
    "createdBy" : "null",
    "creationDate" : 0,
    "lastModifiedBy" : "null",
    "lastModifiedDate" : 0
  }
}